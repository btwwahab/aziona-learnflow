<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aziona LearnFlow - AI-Powered Learning Platform</title>
    <link rel="icon" type="image/png" href="assets/images/logo.png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/glassmorphism.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/themes/dark.css" id="theme-stylesheet" />

    <!-- Font Awesome - Use alternative CDN -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v6.4.0/css/all.css"
      crossorigin="anonymous"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  </head>
  <body class="theme-dark">
    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
      <div class="theme-toggle glass-card">
        <button class="theme-btn" data-theme="light" title="Light Mode">
          <i class="fas fa-sun"></i>
        </button>
        <button class="theme-btn active" data-theme="dark" title="Dark Mode">
          <i class="fas fa-moon"></i>
        </button>
        <button class="theme-btn" data-theme="nebula" title="Nebula Mode">
          <i class="fas fa-star"></i>
        </button>
      </div>
    </div>

    <!-- Main Container -->
    <div class="container-fluid p-0">
      <!-- Header -->
      <header class="header glass-card">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-auto">
              <h1 class="logo">
                <i class="fas fa-brain neon-glow"></i>
                Aziona LearnFlow
              </h1>
            </div>
            <div class="col text-end">
              <div class="user-info" id="user-info" style="display: none">
                <span class="welcome-text"
                  >Welcome back, <span id="user-name"></span>!</span
                >
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Onboarding Section -->
      <section id="onboarding-section" class="onboarding-section">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="onboarding-card glass-card">
                <div class="onboarding-header">
                  <h2 class="title-glow">
                    ðŸš€ Welcome to Your AI Learning Journey
                  </h2>
                  <p class="subtitle">
                    Let's personalize your learning experience with AI-powered
                    recommendations
                  </p>
                </div>

                <form id="onboarding-form" class="onboarding-form">
                  <div class="form-step active" data-step="1">
                    <div class="step-indicator">
                      <div class="step-number">1</div>
                      <div class="step-title">Personal Info</div>
                    </div>

                    <div class="form-group">
                      <label for="userName" class="form-label"
                        >What's your name?</label
                      >
                      <input
                        type="text"
                        id="userName"
                        name="userName"
                        class="form-control glass-input"
                        placeholder="Enter your name"
                        required
                      />
                    </div>

                    <button
                      type="button"
                      class="btn btn-primary btn-next"
                      onclick="nextStep()"
                    >
                      Next <i class="fas fa-arrow-right"></i>
                    </button>
                  </div>

                  <div class="form-step" data-step="2">
                    <div class="step-indicator">
                      <div class="step-number">2</div>
                      <div class="step-title">Skill Level</div>
                    </div>

                    <div class="form-group">
                      <label class="form-label"
                        >What's your current skill level?</label
                      >
                      <div class="skill-options">
                        <div class="skill-option">
                          <input
                            type="radio"
                            id="beginner"
                            name="skillLevel"
                            value="beginner"
                            required
                          />
                          <label for="beginner" class="skill-label">
                            <i class="fas fa-seedling"></i>
                            <span>Beginner</span>
                            <small>Just getting started</small>
                          </label>
                        </div>
                        <div class="skill-option">
                          <input
                            type="radio"
                            id="intermediate"
                            name="skillLevel"
                            value="intermediate"
                          />
                          <label for="intermediate" class="skill-label">
                            <i class="fas fa-chart-line"></i>
                            <span>Intermediate</span>
                            <small>Some experience</small>
                          </label>
                        </div>
                        <div class="skill-option">
                          <input
                            type="radio"
                            id="expert"
                            name="skillLevel"
                            value="expert"
                          />
                          <label for="expert" class="skill-label">
                            <i class="fas fa-crown"></i>
                            <span>Expert</span>
                            <small>Advanced knowledge</small>
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="form-navigation">
                      <button
                        type="button"
                        class="btn btn-secondary btn-prev"
                        onclick="prevStep()"
                      >
                        <i class="fas fa-arrow-left"></i> Previous
                      </button>
                      <button
                        type="button"
                        class="btn btn-primary btn-next"
                        onclick="nextStep()"
                      >
                        Next <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </div>

                  <div class="form-step" data-step="3">
                    <div class="step-indicator">
                      <div class="step-number">3</div>
                      <div class="step-title">Learning Goal</div>
                    </div>

                    <div class="form-group">
                      <label class="form-label"
                        >What would you like to learn?</label
                      >
                      <div class="learning-goals">
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="python"
                            name="learningGoal"
                            value="Python Programming"
                            required
                          />
                          <label for="python" class="goal-label">
                            <i class="fab fa-python"></i>
                            <span>Python</span>
                          </label>
                        </div>
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="javascript"
                            name="learningGoal"
                            value="JavaScript Programming"
                          />
                          <label for="javascript" class="goal-label">
                            <i class="fab fa-js"></i>
                            <span>JavaScript</span>
                          </label>
                        </div>
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="ui-ux"
                            name="learningGoal"
                            value="UI/UX Design"
                          />
                          <label for="ui-ux" class="goal-label">
                            <i class="fas fa-palette"></i>
                            <span>UI/UX</span>
                          </label>
                        </div>
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="ml"
                            name="learningGoal"
                            value="Machine Learning"
                          />
                          <label for="ml" class="goal-label">
                            <i class="fas fa-robot"></i>
                            <span>ML</span>
                          </label>
                        </div>
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="web-dev"
                            name="learningGoal"
                            value="Web Development"
                          />
                          <label for="web-dev" class="goal-label">
                            <i class="fas fa-code"></i>
                            <span>Web Dev</span>
                          </label>
                        </div>
                        <div class="goal-option">
                          <input
                            type="radio"
                            id="data-science"
                            name="learningGoal"
                            value="Data Science"
                          />
                          <label for="data-science" class="goal-label">
                            <i class="fas fa-chart-bar"></i>
                            <span>Data Science</span>
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="form-navigation">
                      <button
                        type="button"
                        class="btn btn-secondary btn-prev"
                        onclick="prevStep()"
                      >
                        <i class="fas fa-arrow-left"></i> Previous
                      </button>
                      <button type="submit" class="btn btn-success btn-submit">
                        Start Learning <i class="fas fa-rocket"></i>
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Loading Section -->
      <section
        id="loading-section"
        class="loading-section"
        style="display: none"
      >
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
              <div class="loading-card glass-card">
                <div class="loading-animation">
                  <div class="neural-network">
                    <div class="node"></div>
                    <div class="node"></div>
                    <div class="node"></div>
                    <div class="node"></div>
                    <div class="node"></div>
                    <div class="connection"></div>
                    <div class="connection"></div>
                    <div class="connection"></div>
                    <div class="connection"></div>
                  </div>
                </div>
                <h3 class="loading-title">
                  AI is curating your learning experience...
                </h3>
                <p class="loading-text" id="loading-text">
                  Searching for the best educational content
                </p>
                <div class="progress-bar">
                  <div class="progress-fill" id="progress-fill"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Learning Dashboard -->
      <section
        id="dashboard-section"
        class="dashboard-section"
        style="display: none"
      >
        <div class="container-fluid">
          <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-4">
              <div class="sidebar glass-card">
                <div class="learning-progress">
                  <h4>Learning Progress</h4>
                  <div class="progress-circle" id="progress-circle">
                    <div class="progress-text">0%</div>
                  </div>
                  <div class="progress-stats">
                    <div class="stat">
                      <span class="stat-value" id="videos-watched">0</span>
                      <span class="stat-label">Videos Watched</span>
                    </div>
                    <div class="stat">
                      <span class="stat-value" id="quiz-score">0</span>
                      <span class="stat-label">Quiz Score</span>
                    </div>
                  </div>
                </div>

                <div class="video-playlist" id="video-playlist">
                  <h4>Your Learning Path</h4>
                  <div class="playlist-items" id="playlist-items">
                    <!-- Dynamic content will be loaded here -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-md-8">
              <div class="main-content">
                <!-- Video Player -->
                <div class="video-player-container glass-card">
                  <div class="video-player" id="video-player">
                    <iframe
                      id="youtube-player"
                      width="100%"
                      height="400"
                      frameborder="0"
                      allowfullscreen
                    ></iframe>
                  </div>
                  <div class="video-controls">
                    <button class="btn btn-primary" id="prev-video" disabled>
                      <i class="fas fa-backward"></i> Previous
                    </button>
                    <button class="btn btn-success" id="mark-complete">
                      <i class="fas fa-check"></i> Mark Complete
                    </button>
                    <button class="btn btn-primary" id="next-video">
                      Next <i class="fas fa-forward"></i>
                    </button>
                  </div>
                </div>

                <!-- AI Chat Assistant -->
                <!-- Update the chat-header section: -->

                <div class="ai-chat-container glass-card">
                  <div class="chat-header">
                    <h4><i class="fas fa-robot"></i> AI Learning Assistant</h4>
                    <div class="chat-controls">
                      <button
                        class="btn btn-sm btn-outline-danger"
                        id="clear-chat"
                        title="Clear Chat History"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                      <!-- <button
                        class="btn btn-sm btn-outline-primary"
                        id="toggle-chat"
                        title="Toggle Chat"
                      >
                        <i class="fas fa-chevron-up"></i>
                      </button> -->
                    </div>
                  </div>
                  <div class="chat-messages" id="chat-messages">
                    <div class="message ai-message">
                      <div class="message-content">
                        <p>
                          Hello! I'm your AI learning assistant. I can help you
                          understand concepts, answer questions, and provide
                          explanations about the current video. What would you
                          like to know?
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="chat-input">
                    <input
                      type="text"
                      id="chat-input"
                      class="form-control chat-place"
                      placeholder="Ask me anything about the video..."
                    />
                    <button class="btn btn-primary" id="send-message">
                      <i class="fas fa-paper-plane"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Quiz Section -->
      <section id="quiz-section" class="quiz-section" style="display: none">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="quiz-card glass-card">
                <div class="quiz-header">
                  <h3>Video Quiz</h3>
                  <div class="quiz-progress">
                    <span id="question-number">1</span> /
                    <span id="total-questions">5</span>
                  </div>
                </div>
                <div class="quiz-content" id="quiz-content">
                  <!-- Dynamic quiz content -->
                </div>
                <div class="quiz-navigation">
                  <button class="btn btn-secondary" id="prev-question" disabled>
                    Previous
                  </button>
                  <button class="btn btn-primary" id="next-question">
                    Next
                  </button>
                  <button
                    class="btn btn-success"
                    id="submit-quiz"
                    style="display: none"
                  >
                    Submit Quiz
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Update the Results Section - REMOVE the hardcoded score: -->

      <section
        id="results-section"
        class="results-section"
        style="display: none"
      >
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="results-card glass-card">
                <div class="results-header">
                  <h3>Quiz Results</h3>
                  <!-- REMOVE this hardcoded score display -->
                  <!-- <div class="score-display" id="score-display">
                            <div class="score-circle">
                                <div class="score-text">85%</div>
                            </div>
                        </div> -->
                </div>
                <div class="results-content" id="results-content">
                  <!-- Dynamic results content will be loaded here -->
                </div>
                <div class="results-actions">
                  <button class="btn btn-primary" id="continue-learning">
                    Continue Learning
                  </button>
                  <button class="btn btn-outline-primary" id="retake-quiz">
                    Retake Quiz
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Summary Section -->
      <section
        id="summary-section"
        class="summary-section"
        style="display: none"
      >
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-10">
              <div class="summary-card glass-card">
                <div class="summary-header">
                  <h3>ðŸŽ‰ Congratulations! Learning Complete</h3>
                  <p>
                    You've successfully completed your learning journey. Here's
                    your personalized summary:
                  </p>
                </div>
                <div class="summary-content" id="summary-content">
                  <!-- Dynamic summary content -->
                </div>
                <div class="summary-actions">
                  <button class="btn btn-success" id="download-notes">
                    <i class="fas fa-download"></i> Download Notes
                  </button>
                  <button class="btn btn-primary" id="start-new-learning">
                    <i class="fas fa-plus"></i> Start New Learning
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="floating-assistant" id="floating-assistant">
      <button class="assistant-toggle" id="assistant-toggle">
        <i class="fas fa-robot"></i>
      </button>

      <div class="assistant-popup glass-card" id="assistant-popup">
        <div class="assistant-header">
          <h5><i class="fas fa-brain"></i> AI Assistant</h5>
          <button class="btn-close" id="close-assistant"></button>
        </div>

        <div class="assistant-body">
          <div class="quick-questions">
            <button class="quick-question-btn">
              Can you explain this concept?
            </button>
            <button class="quick-question-btn">What are the key points?</button>
            <button class="quick-question-btn">How do I practice this?</button>
          </div>

          <div class="assistant-input">
            <input
              type="text"
              placeholder="Ask me anything..."
              maxlength="200"
            />
            <button type="button">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS - Load in correct order -->
    <script src="js/config.js"></script>
    <script src="js/utils/storage.js"></script>
    <script src="js/utils/animations.js"></script>
    <script src="js/utils/model.js"></script>
    <script src="js/client/groq.js"></script>
    <script src="js/client/youtube.js"></script>
    <script src="js/components/onboarding.js"></script>
    <script src="js/components/video-player.js"></script>
    <script src="js/components/chat-assistant.js"></script>
    <script src="js/components/quiz-generator.js"></script>
    <script src="js/components/revision-notes.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
